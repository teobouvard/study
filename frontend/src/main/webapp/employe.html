<!DOCTYPE html>
<html>

    <head>
        <title>Positif</title>
        <meta charset="UTF-8">

        <!-- Librairie Javascript: jQuery (v3.3.1) -->
        <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
        <link rel="stylesheet" type="text/CSS" href="client.css">
    </head>

    <body>
        <div id="bloc-page">
            <h1> AstroNet </h1><br>
            <p id="employe">Bonjour, </p><br>
            <div id="voyance-client">
                <h2>Client</h2>
                <label id="nom-client"> </label><br>
                <label id="prenom-client"> </label><br>
                <label id="medium"> </label><br>
                <label id="couleur"></label><br>
                <label id="zodiaque"></label><br>
                <label id="chinois"></label><br>
                <label id="animal"></label><br>
                <table id="historique">  </table>
            </div><br>

            <div id="bouton-centre">
                <button id="pret">Je suis prêt</button>
                <button id="stats" onclick="location='statistiques.html'">Statistiques</button>
            </div><br>

            <div id="voyance-employe">
                <button id="debut-appel">Début appel</button>
                <button id="fin-appel">Fin appel</button> <br>
                Générateur : <br>
                <input id="note-amour" placeholder="Note amour" type="number" max="5" min="1" required>
                <input id="note-sante" placeholder="Note santé" type="number" max="5" min="1" required>
                <input id="note-travail" placeholder="Note travail" type="number" max="5" min="1" required><br>
                <button id="generer-predictions"> Générer </button><br>
                <table id="predictions">
                    <tr>
                        <th>
                            Catégorie
                        </th>
                        <th>
                            Prédiction
                        </th>
                    </tr>
                    <tr>
                        <th>
                            Amour
                        </th>
                        <td id="pred-amour">

                        </td>
                    </tr>
                    <tr>
                        <th>
                            Santé
                        </th>
                        <td id="pred-sante">

                        </td>
                    </tr>
                    <tr>
                        <th>
                            Travail
                        </th>
                        <td id="pred-travail">

                        </td>
                    </tr>
                </table> 
                <br>
                <input id="commentaire-employe" placeholder="Laisser un commentaire sur la voyance" type="text">
                <button id="valider-voyance">Valider la voyance</button>
            </div>

        </div>

        <script>
            $(document).ready(function () {
                GetInfoEmploye();
                GetVoyanceEnCours();
            });

            function GetInfoEmploye() {
                $.ajax({
                    url: './ActionServlet', // URL
                    method: 'POST', // Méthode
                    data: {// Paramètres
                        todo: 'infos-employe'
                    },
                    dataType: 'json'        // Type de retour attendu
                }).done(function (response) {
                    $('#employe').append(response.prenom + " " + response.nom);
                })
            }

            function GetVoyanceEnCours()
            {
                $.ajax({
                    url: './ActionServlet', // URL
                    method: 'POST', // Méthode
                    data: {// Paramètres
                        todo: 'voyance-en-cours'
                    },
                    dataType: 'json'        // Type de retour attendu
                }).done(function (response) {
                    if(response.statut){
                        $("#nom-client").html(response.nomClient);
                        $("#prenom-client").html(response.prenomClient);
                        $("#medium").html(response.medium);
                        $("#couleur").html(response.couleur);
                        $("#zodiaque").html(response.zodiaque);
                        $("#chinois").html(response.chinois);
                        $("#animal").html(response.animal);
                    }
                    else{
                        $("#medium").html("Vous n'avez aucune demande de voyance en attente");
                    }
                    
                }).fail(function (error) {
                    alert(error.statusText);
                });
            }


        </script>

    </body>

</html>